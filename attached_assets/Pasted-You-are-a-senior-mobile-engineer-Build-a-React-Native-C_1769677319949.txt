You are a senior mobile engineer.

Build a React Native (CLI, not Expo) app that lets two players play chess over Bluetooth Low Energy (BLE) on Android and iOS.

REQUIREMENTS
- Platform: React Native CLI
- Language: TypeScript
- Bluetooth: react-native-ble-plx
- Chess logic: chess.js
- Architecture must be clean and modular

FUNCTIONALITY
1. Two devices connect using Bluetooth Low Energy (BLE)
2. One device acts as host (advertises a BLE service)
3. Other device scans and connects
4. Devices exchange chess moves in real time
5. Moves are validated locally using chess.js
6. Illegal moves are rejected
7. Game enforces turns correctly
8. Supports:
   - Castling
   - En passant
   - Promotion
   - Check / checkmate / stalemate
9. Moves are sent as JSON messages encoded as base64
10. Each move includes a moveIndex for sync validation

BLUETOOTH DESIGN
- One BLE service with static UUID
- Characteristics:
  - MoveCharacteristic (write + notify)
  - ControlCharacteristic (start game, resign)
- Use notifications to receive moves
- Handle disconnects gracefully

MESSAGE FORMAT
Example move payload:
{
  "type": "move",
  "moveIndex": number,
  "from": "e2",
  "to": "e4",
  "promotion": "q" | null
}

PROJECT STRUCTURE
src/
- ble/
  - BleManager.ts
  - ChessBleService.ts
- chess/
  - ChessGame.ts
- ui/
  - ChessBoard.tsx
  - GameScreen.tsx
- App.tsx

UI
- Simple 8x8 chessboard
- Touchable squares
- Visual piece rendering
- Highlight selected square and legal moves

PERMISSIONS
- Android: Bluetooth scan + location permissions
- iOS: NSBluetoothAlwaysUsageDescription

DELIVERABLES
- Full project structure
- Key files implemented with real code
- BLE connection logic
- Move send/receive logic
- Chess validation logic
- Comments explaining critical decisions

DO NOT:
- Use Expo
- Skip BLE implementation
- Handwave chess rules
- Return pseudocode only

Output clean, production-quality code with explanations where needed.
